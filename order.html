<!DOCTYPE html>
<html lang="en">

<head>
  <title>Donut Empire</title>
  <meta name="theme-color" content="#317EFB" />
  <meta name="Donut Empire" content="Craving donuts? Check out our super cool menu and get donuts right away!" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
  <!-- Jquery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <!-- AOS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- Custom Stylesheets -->
  <link rel="stylesheet" href="./styles/order.css">
  <link rel="stylesheet" href="./styles/nav.css">
  <link rel="stylesheet" href="./styles/footer.css">
  <!-- icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body onload="displayItems()">
  <div>
    <nav data-aos="fade-down" class="navbar navbar-expand-lg fixed-top  navbar-light" style="background:#47cacc">
      <img width="188" class="logo" src="./assets/donutlogo.png" alt="logo"></img>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02"
        aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        </ul>
        <form>
          <ul class="navbar-nav mr-auto navbar-right mt-2 mt-lg-0">
            <li class="nav-item "><a class="nav-link btn" href="./index.html">Home</a></li>
            <li class="nav-item "><a class="nav-link btn " href="./menu.html">Menu</a></li>
            <li class="nav-item"><a class="nav-link  btn " href="./stores.html">Stores</a></li>
            <li class="nav-item"><a class="nav-link  btn activenav" href="./order.html">Order</a></li>
            <li class="nav-item "><a class="nav-link btn " href="./contact.html">Contact</a></li>
          </ul>
        </form>
      </div>
    </nav>
  </div>
  <div class="flex-wrapper">
    <div class="headerdiv">
      <h1 class="ml1">
        <span class="text-wrapper">
          <span class="line line1"></span>
          <span class="letters">ORDER</span>
          <span class="line line2"></span>
        </span>
      </h1>
    </div>
    <div class="container ordercontainer" data-aos="zoom-in-right">
      <div class="row text-center">
        <div class="col-12 col-sm-6 col-lg-6 col-md-6 col-xl-6 order-2 order-sm-1 order-lg-1 order-md-1 order-xl-1"
          style="overflow-y:scroll;height:650px;">
          <div class="row text-center menuitems" id="menuitems">
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-6 col-md-6 col-xl-6 order-1 cart">
          <div class="aboutdiv">
            <hr>
            <h2>Your Cart &nbsp;<i class="fa fa-shopping-cart"></i></h2>
            <hr>
            <div id="cartitems" class="cartitems">
              <h5>Your cart is currently empty!</h5>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="modal-container">
      <div class="modal-background">
        <div class="modal" id="modalcontent">
          <div>
            <h4>Enter your details</h4>
            <form class="orderform">
              <div class="form-group row">
                <label for="inputPassword" class="col-form-label">Name</label>
                <div>
                  <input type="text" class="form-control" id="inputPassword">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputPassword" class="col-form-label">Phone</label>
                <div>
                  <input type="text" class="form-control" id="inputPassword">
                </div>
              </div>
              <div class="form-group row">
                <label for="addr" class="col-form-label">Address</label>
                <div>
                  <textarea class="form-control" id="addr"></textarea>
                </div>
              </div>
              <div class="form-group row">
                <label for="pincode" class="col-form-label">Pincode</label>
                <div>
                  <input type="text" class="form-control" id="pincode">
                </div>
              </div>
              <div class="row" style="margin-left: auto;margin-right: auto;justify-content: center;">
                <div onclick="closemodal()" class="addcart">Cancel</div>
                <div onclick="placeorder()" class="addcart">Place Order</div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="container pagelinks">
        <div class="row" style="margin-bottom: -1em; ">
          <div class="col-sm-12 col-md-6">
            <img class="footerlogo" src="./assets/donutlogo.png" alt="logo"></img>

            <p class="text-justify">What are you waiting for? Go visit your nearest donut empire store right away or
              call
              and place your order! Feel
              free to contact us in case you have any questions. </p>
          </div>
          <div class="col-xs-6 col-md-3 pagelinks">
          </div>
          <div class="col-xs-6 col-md-3 pagelinks">
            <h6>Quick Links</h6>
            <ul class="footer-links">
              <li><a href="./index.html">Home</a></li>
              <li><a href="./menu.html">Menu</a></li>
              <li><a href="./stores.html">Stores</a></li>
              <li><a href="./order.html">Order</a></li>
              <li><a href="./contact.html">Contact</a></li>
            </ul>
          </div>
        </div>
        <hr>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-sm-6 col-xs-12">
            <p class="copyright-text">Copyright &copy; 2021 All Rights Reserved by Sneha Sriram Kannan
            </p>
          </div>

          <div class="col-md-4 col-sm-6 col-xs-12">
            <ul class="social-icons">
              <li><i class="fa fa-facebook facebook"></i></li>
              <li><i class="fa fa-twitter twitter"></i> </li>
              <li><i class="fa fa-instagram instagram"></i> </li>
              <li><i class="fa fa-linkedin linkedin"></i> </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
  <script>
    AOS.init();
    var textWrapper = document.querySelector('.ml1 .letters');
    textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
    anime.timeline({ loop: true })
      .add({
        targets: '.ml1 .letter',
        scale: [0.3, 1],
        opacity: [0, 1],
        translateZ: 0,
        duration: 600,
        delay: (el, i) => 70 * (i + 1)
      }).add({
        targets: '.ml1 .line',
        scaleX: [0, 1],
        opacity: [0.5, 1],
        duration: 700,
        offset: '-=875',
        delay: (el, i, l) => 80 * (l - i)
      }).add({
        targets: '.ml1',
        opacity: 0,
        duration: 1000,
        delay: 1000
      });
  </script>
  <script>
    var menuitems = [{ image: "glazed.png", price: 98, name: "Original Glazed", desc: "Our signature glazed donut", added: false },
    { image: "chocosprinkles.png", price: 108, name: "Choco Sprinkles", desc: "Choco frosted with rainbow sprinkle", added: false },
    { image: "straw.png", price: 108, name: "Berry Sprinkles", desc: "Strawberry frosted with sprinkles", added: false },
    { image: "choco.png", price: 98, name: "Choco Glazed", desc: "Chocolate icing on our Original Glazed", added: false },
    { image: "oreo.png", price: 145, name: "Oreo Filled", desc: "Filled with Oreo Cookies and Kreme", added: false },
    { image: "cinn.png", price: 108, name: "Cinnamon", desc: "The cinnamon powdered donut", added: false },
    { image: "vanchoco.png", price: 125, name: "Vanilla Choco Chip", desc: "Vanilla frosted with choco chips", added: false },
    { image: "choconut.png", price: 125, name: "Choco Nuts", desc: "Chocolate frosted with roasted nuts", added: false }
    ]
    var cart = [0, 0, 0, 0, 0, 0, 0, 0]
    var cartitems = 0
    var totalprice = 0
    function displayItems() {
      newitems = ""
      for (var item in menuitems) {
        var x = menuitems[item]
        newitem = " <div class=\"card \" id=\""
        newitem += item
        newitem += "\"> <div class=\"row no-gutters\"><div class=\"col-md-4\"> <img alt=\"donut\" src=\""
        newitem += "./assets/menu/" + x.image;
        newitem += "\"> </div ><div class=\"col-md-8\"> <div class=\"card-body\"> <h5 class=\"card-title\">"
        newitem += x.name
        newitem += "</h5><p class=\"card-text desc\">"
        newitem += x.desc
        newitem += "</p>"
        newitem += "<div class=\"row quant\"><button onclick=\"addCart()\" class=\"addcart\">Add to Cart &nbsp;<i class=\"fa fa-shopping-cart\"></i></button></div>"
        newitem += "</div > </div ></div > </div > "
        newitems += newitem
      }
      document.getElementById("menuitems").innerHTML = newitems;
    }
    function addCart() {
      var index = event.target.parentElement.parentElement.parentElement.parentElement.parentElement.id;
      menuitems[index].added = true
      totalprice += menuitems[index].price
      event.target.parentElement.innerHTML = "<button onclick=\"removeone()\" id=\"remove\">-</button><p class=\"numdonuts\" id=\"numdonuts" + index + "\">1</p><button onclick=\"addone()\" id=\"add\">+</button>"
      if (cart[index] == 0)//item not yet added
      {
        var newrow = "<tr ><td>" + menuitems[index].name + "</td><td>1</td><td>" + "₹&nbsp;" + menuitems[index].price + "</td></tr>"
        if (cartitems == 0) {
          document.getElementById("cartitems").innerHTML = "<table data-aos=\"fade-right\"><thead><tr><th>Product</th><th>Quantity</th><th>Price</th></tr></thead><tbody id=\"items\"" + newrow + "</tbody><tfoot><tr><th >Total Price</th><th></th><th id=\"totalprice\">" + "₹&nbsp;" + totalprice + "</th></tr></tfoot></table>"
          console.log(document.getElementById("formmodal"))
          document.getElementById("cartitems").innerHTML += "<button class=\"addcart\" style=\"margin-top:1em\" onClick=\"openmodal()\">Proceed to buy</button>"
        }
        else {
          document.getElementById("items").innerHTML += newrow
          document.getElementById("totalprice").innerHTML = "₹&nbsp;" + totalprice
        }
      }
      cart[index] += 1
      cartitems += 1
    }
    function addone() {
      var index = event.target.parentElement.parentElement.parentElement.parentElement.parentElement.id
      cartitems += 1
      cart[index] += 1
      var search = menuitems[index].name
      var table = document.getElementById("items").getElementsByTagName("tr")
      for (var x in table) {
        if (table[x].getElementsByTagName("td")[0].innerHTML === search) {
          table[x].getElementsByTagName("td")[1].innerHTML = cart[index]
          table[x].getElementsByTagName("td")[2].innerHTML = "₹&nbsp;" + cart[index] * menuitems[index].price
          totalprice += menuitems[index].price
          break;
        }
      }
      document.getElementById("totalprice").innerHTML = "₹&nbsp;" + totalprice
      var searchindex = "numdonuts" + index
      var cards = document.getElementById(searchindex)
      cards.innerHTML = cart[index]
    }
    function removeone() {
      var index = event.target.parentElement.parentElement.parentElement.parentElement.parentElement.id
      cartitems -= 1
      cart[index] -= 1
      var search = menuitems[index].name
      var table = document.getElementById("items").getElementsByTagName("tr")
      for (var x in table) {
        if (table[x].getElementsByTagName("td")[0].innerHTML === search) {
          totalprice -= menuitems[index].price
          if (cart[index] == 0) {
            event.target.parentElement.innerHTML = "<button onclick=\"addCart()\" class=\"addcart\">Add to Cart &nbsp;<i class=\"fa fa-shopping-cart\"></i></button>"
            document.getElementById("items").removeChild(table[x])
          }
          else {
            table[x].getElementsByTagName("td")[1].innerHTML = cart[index]
            table[x].getElementsByTagName("td")[2].innerHTML = "₹&nbsp;" + cart[index] * menuitems[index].price
            var searchindex = "numdonuts" + index
            var cards = document.getElementById(searchindex)
            cards.innerHTML = cart[index]
          }
          break;
        }
      }
      document.getElementById("totalprice").innerHTML = "₹&nbsp;" + totalprice
      if (cartitems == 0)
        document.getElementById("cartitems").innerHTML = "<h5>Your cart is currently empty!</h5>"
      console.log(document.getElementById("cartitems"))
    }
    function openmodal() {
      document.getElementById("modal-container").removeAttribute("class");
      document.getElementById("modal-container").classList.add("formmodal");
      document.body.classList.add("formmodal");
    }
    function closemodal() {
      document.getElementById("modal-container").classList.add("out");
      document.getElementById("modal-container").classList.remove("formmodal"); document.getElementById("modal-container").classList.remove("formmodal");
      document.getElementById("modal-container").classList.remove("modal-active");
    }
    function placeorder() {
      document.getElementById("modalcontent").innerHTML = "<h5 onclick=\"location.reload()\"style=\"text-align:right\"><i  class=\"fa fa-close\"></i></h5><img alt=\"success\" class=\"success\"src=\"./assets/ordersuccess.png\"><br><h5>Your order has been placed! You will be receiving a call shortly from your nearest donut empire store.</h5>"
    }
  </script>
</body>


</html>